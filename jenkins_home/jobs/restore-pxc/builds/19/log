Started by user unknown or anonymous
Running as SYSTEM
Agent [8mha:////4MCXhku04kqPoUO/6XOdTpnEEkoQEY0SqqiIqk/ckqmQAAAAsB+LCAAAAAAAAP9b85aBtbiIQTGjNKU4P08vOT+vOD8nVc83PyU1x6OyILUoJzMv2y+/JJUBAhiZGBgqihhk0NSjKDWzXb3RdlLBUSYGJk8GtpzUvPSSDB8G5tKinBIGIZ+sxLJE/ZzEvHT94JKizLx0a6BxUmjGOUNodHsLgAypEgYV/eT83ILSktQi/azUvOzMvGLd0qTSvJJS3eKcxLJU3QLzrEJTAOlKHe/ZAAAA[0mjenkins-ubuntu-slave-p7jq5 is provisioned from template jenkins-ubuntu-slave
---
apiVersion: "v1"
kind: "Pod"
metadata:
  labels:
    jenkins: "slave"
    jenkins/label-digest: "4452effe8abda50a55029b42caf5f0b22f7c3ecb"
    jenkins/label: "jenkins-ubuntu-slave"
  name: "jenkins-ubuntu-slave-p7jq5"
  namespace: "jenkins"
spec:
  containers:
  - args:
    - "9999999"
    command:
    - "sleep"
    image: "ubuntu:22.10"
    imagePullPolicy: "IfNotPresent"
    name: "jenkins-ubuntu-slave"
    resources:
      limits: {}
      requests: {}
    securityContext:
      privileged: false
      runAsUser: 0
    tty: false
    volumeMounts:
    - mountPath: "/home/jenkins/agent"
      name: "workspace-volume"
      readOnly: false
    workingDir: "/home/jenkins/agent"
  - env:
    - name: "JENKINS_SECRET"
      value: "********"
    - name: "JENKINS_AGENT_NAME"
      value: "jenkins-ubuntu-slave-p7jq5"
    - name: "JENKINS_WEB_SOCKET"
      value: "true"
    - name: "JENKINS_NAME"
      value: "jenkins-ubuntu-slave-p7jq5"
    - name: "JENKINS_AGENT_WORKDIR"
      value: "/home/jenkins/agent"
    - name: "JENKINS_URL"
      value: "http://jenkins-master.jenkins:80/"
    image: "jenkins/inbound-agent:4.11-1-jdk11"
    name: "jnlp"
    resources:
      limits: {}
      requests:
        memory: "256Mi"
        cpu: "100m"
    volumeMounts:
    - mountPath: "/home/jenkins/agent"
      name: "workspace-volume"
      readOnly: false
  hostNetwork: false
  nodeSelector:
    kubernetes.io/os: "linux"
  restartPolicy: "Never"
  securityContext:
    runAsUser: 0
  serviceAccountName: "jenkins-admin"
  volumes:
  - emptyDir:
      medium: ""
    name: "workspace-volume"

[EnvInject] - Loading node environment variables.
Building remotely on [8mha:////4MCXhku04kqPoUO/6XOdTpnEEkoQEY0SqqiIqk/ckqmQAAAAsB+LCAAAAAAAAP9b85aBtbiIQTGjNKU4P08vOT+vOD8nVc83PyU1x6OyILUoJzMv2y+/JJUBAhiZGBgqihhk0NSjKDWzXb3RdlLBUSYGJk8GtpzUvPSSDB8G5tKinBIGIZ+sxLJE/ZzEvHT94JKizLx0a6BxUmjGOUNodHsLgAypEgYV/eT83ILSktQi/azUvOzMvGLd0qTSvJJS3eKcxLJU3QLzrEJTAOlKHe/ZAAAA[0mjenkins-ubuntu-slave-p7jq5 (jenkins-ubuntu-slave) in workspace /home/jenkins/agent/workspace/restore-pxc
The recommended git tool is: NONE
No credentials specified
Cloning the remote Git repository
Cloning repository https://github.com/mohamed-fazil-saleem/backup-pxc.git
 > git init /home/jenkins/agent/workspace/restore-pxc # timeout=10
Fetching upstream changes from https://github.com/mohamed-fazil-saleem/backup-pxc.git
 > git --version # timeout=10
 > git --version # 'git version 2.30.2'
 > git fetch --tags --force --progress -- https://github.com/mohamed-fazil-saleem/backup-pxc.git +refs/heads/*:refs/remotes/origin/* # timeout=10
 > git config remote.origin.url https://github.com/mohamed-fazil-saleem/backup-pxc.git # timeout=10
 > git config --add remote.origin.fetch +refs/heads/*:refs/remotes/origin/* # timeout=10
Avoid second fetch
 > git rev-parse origin/main^{commit} # timeout=10
Checking out Revision ba2e0f8fa6928846636da48a2acb5767fa6f79a7 (origin/main)
 > git config core.sparsecheckout # timeout=10
 > git checkout -f ba2e0f8fa6928846636da48a2acb5767fa6f79a7 # timeout=10
Commit message: "uploading file"
 > git rev-list --no-walk ba2e0f8fa6928846636da48a2acb5767fa6f79a7 # timeout=10
[EnvInject] - Inject global passwords.
[EnvInject] - Mask passwords that will be passed as build parameters.
[restore-pxc] $ /bin/sh -xe /tmp/jenkins9947881297054975407.sh
+ apt-get update
Get:1 http://deb.debian.org/debian bullseye InRelease [116 kB]
Get:2 http://security.debian.org/debian-security bullseye-security InRelease [48.4 kB]
Get:3 http://deb.debian.org/debian bullseye-updates InRelease [44.1 kB]
Get:4 http://security.debian.org/debian-security bullseye-security/main amd64 Packages [194 kB]
Get:5 http://deb.debian.org/debian bullseye/main amd64 Packages [8184 kB]
Get:6 http://deb.debian.org/debian bullseye-updates/main amd64 Packages [14.6 kB]
Fetched 8600 kB in 2s (4503 kB/s)
Reading package lists...
+ apt-get install curl sudo -y
Reading package lists...
Building dependency tree...
Reading state information...
The following NEW packages will be installed:
  curl sudo
0 upgraded, 2 newly installed, 0 to remove and 32 not upgraded.
Need to get 1328 kB of archives.
After this operation, 5138 kB of additional disk space will be used.
Get:1 http://deb.debian.org/debian bullseye/main amd64 curl amd64 7.74.0-1.3+deb11u3 [269 kB]
Get:2 http://deb.debian.org/debian bullseye/main amd64 sudo amd64 1.9.5p2-3 [1059 kB]
debconf: delaying package configuration, since apt-utils is not installed
Fetched 1328 kB in 0s (3476 kB/s)
Selecting previously unselected package curl.
(Reading database ... (Reading database ... 5%(Reading database ... 10%(Reading database ... 15%(Reading database ... 20%(Reading database ... 25%(Reading database ... 30%(Reading database ... 35%(Reading database ... 40%(Reading database ... 45%(Reading database ... 50%(Reading database ... 55%(Reading database ... 60%(Reading database ... 65%(Reading database ... 70%(Reading database ... 75%(Reading database ... 80%(Reading database ... 85%(Reading database ... 90%(Reading database ... 95%(Reading database ... 100%(Reading database ... 10775 files and directories currently installed.)
Preparing to unpack .../curl_7.74.0-1.3+deb11u3_amd64.deb ...
Unpacking curl (7.74.0-1.3+deb11u3) ...
Selecting previously unselected package sudo.
Preparing to unpack .../sudo_1.9.5p2-3_amd64.deb ...
Unpacking sudo (1.9.5p2-3) ...
Setting up sudo (1.9.5p2-3) ...
invoke-rc.d: could not determine current runlevel
invoke-rc.d: policy-rc.d denied execution of start.
Setting up curl (7.74.0-1.3+deb11u3) ...
+ curl -L -s https://dl.k8s.io/release/stable.txt
+ curl -LO https://dl.k8s.io/release/v1.25.3/bin/linux/amd64/kubectl
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0100   138  100   138    0     0    528      0 --:--:-- --:--:-- --:--:--   528
  0 42.9M    0 27550    0     0  44150      0  0:16:59 --:--:--  0:16:59 44150100 42.9M  100 42.9M    0     0  29.2M      0  0:00:01  0:00:01 --:--:-- 51.0M
+ curl -L -s https://dl.k8s.io/release/stable.txt
+ curl -LO https://dl.k8s.io/v1.25.3/bin/linux/amd64/kubectl.sha256
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0100   138  100   138    0     0    526      0 --:--:-- --:--:-- --:--:--   528
100    64  100    64    0     0    200      0 --:--:-- --:--:-- --:--:--   200
+ sha256sum --check
+ cat kubectl.sha256
+ echo f57e568495c377407485d3eadc27cda25310694ef4ffc480eeea81dea2b60624  kubectl
kubectl: OK
+ sudo install -o root -g root -m 0755 kubectl /usr/local/bin/kubectl
+ cd /home/jenkins/agent/workspace/restore-pxc
+ echo s3://pxc/tardis-sql-2022-11-07-09:55:02-full/
s3://pxc/tardis-sql-2022-11-07-09:55:02-full/
+ cat
+ kubectl delete -f restore.yaml -n pxc
Error from server (NotFound): error when deleting "restore.yaml": perconaxtradbclusterrestores.pxc.percona.com "tardis-sql-restore" not found
+ echo no old restore jobs present in cluster
no old restore jobs present in cluster
+ kubectl apply -f restore.yaml -n pxc
perconaxtradbclusterrestore.pxc.percona.com/tardis-sql-restore created
Finished: SUCCESS
